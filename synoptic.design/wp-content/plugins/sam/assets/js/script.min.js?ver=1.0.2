/*!
 * SAM v1.0.1
 * Copyright (c) SQLBI. All rigths are reserved.
 * https://www.sqlbi.com/	
*/
var sam={autoChange:!1,countryIso:"",data:{},refreshInterval:60,load:function(){var t=this;this.clear();var a=$(".sam");if(a.length){var e=[];a.each(function(a,n){e.push({slot:$(n).data("slot"),setId:$(n).data("set")}),"1"!=$(n).data("multiple")&&"true"!=$(n).data("multiple")||(t.autoChange=!0)}),$.ajax({type:"GET",url:ajaxurl,data:{action:"sqlbi_sam_get_creatives_ajax",s:e,c:this.countryIso},dataType:"json",success:function(e){t.data=e.data.creatives,t.countryIso=e.data.country,a.each(function(a,e){t.render(e,0)}),t.autoChange&&setInterval(function(){t.refresh()},1e3*t.refreshInterval),$.event.trigger({type:"sam:slotsLoaded",time:new Date})}})}$(document).on("click",".sam a",function(t){if("undefined"!=typeof gtag){var a=$(this).find("img"),e=a.length>0?a.attr("src").split("/").pop():"";gtag("event","select_content",{promotions:[{name:$(this).data("campaign"),creative_name:e,creative_slot:$(this).data("size")}]})}})},render:function(t,a){var e=$(t).data("slot");if(this.data.hasOwnProperty(e)){var n=this.data[e][a];""!=n&&($(t).html(n),$.event.trigger({type:"sam:slotRendered",slot:e,time:new Date}))}else $(t).hide()},refresh:function(){var t=this,a=$(".sam");a.each(function(a,e){var n=$(e).data("slot");if(("1"==$(e).data("multiple")||"true"==$(e).data("multiple"))&&t.data.hasOwnProperty(n)){var r=Math.floor(Math.random()*t.data[n].length);t.render(e,r)}})},clear:function(){this.data={}}};